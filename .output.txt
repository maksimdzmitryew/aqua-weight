
> test:unit:coverage
> vitest --config ./vitest.config.ts run --coverage
 RUN  v3.2.4 /app/frontend
      Coverage enabled with v8
stderr | tests/unit/pages/PlantEdit.test.jsx > pages/PlantEdit > load error where thrown error is null still shows generic error
[MSW] Error: intercepted a request without a matching request handler:
  • GET /api/plants/uErr3
If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
stderr | tests/unit/pages/PlantEdit.test.jsx > pages/PlantEdit > load error where thrown error is null still shows generic error
[MSW] Error: intercepted a request without a matching request handler:
  • GET /api/plants/uErr3
If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
stderr | tests/unit/pages/PlantEdit.test.jsx > pages/PlantEdit > load error where thrown error is null still shows generic error
[MSW] Error: intercepted a request without a matching request handler:
  • GET /api/plants/uErr3
If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
 ✓ tests/unit/components/ConfirmDialog.test.jsx (12 tests) 2843ms
   ✓ ConfirmDialog > does not render when open=false and ignores Escape  338ms
   ✓ ConfirmDialog > renders dialog with a11y labels and focuses the first (Cancel) button  801ms
   ✓ ConfirmDialog > clicking buttons calls respective handlers  372ms
   ✓ ConfirmDialog > icon and tone variations render without error (covers branches)  398ms
stderr | tests/unit/pages/PlantEdit.test.jsx > pages/PlantEdit > plant load throws undefined error object and shows generic error
[MSW] Error: intercepted a request without a matching request handler:
  • GET /api/plants/uErrUndef
If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
stderr | tests/unit/pages/PlantEdit.test.jsx > pages/PlantEdit > plant load throws undefined error object and shows generic error
[MSW] Error: intercepted a request without a matching request handler:
  • GET /api/plants/uErrUndef
If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
stderr | tests/unit/pages/PlantEdit.test.jsx > pages/PlantEdit > plant load throws undefined error object and shows generic error
[MSW] Error: intercepted a request without a matching request handler:
  • GET /api/plants/uErrUndef
If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
 ✓ tests/unit/pages/BulkWeightMeasurement.branches.test.jsx (4 tests) 3521ms
   ✓ pages/BulkWeightMeasurement (branches) > handleView returns early when plant has no uuid (no navigation)  872ms
   ✓ pages/BulkWeightMeasurement (branches) > useMemo branch: when initial snapshot is empty, toggling off shows empty state  1297ms
   ✓ pages/BulkWeightMeasurement (branches) > Array.isArray(data) false branch: non-array plants response yields empty list gracefully  304ms
   ✓ pages/BulkWeightMeasurement (branches) > OR-chain fallback for timestamps and nullish metrics keep previous values  997ms
 ✓ tests/unit/pages/LocationEdit.test.jsx (17 tests) 10645ms
   ✓ pages/LocationEdit > prefills from location state, trims name, saves and navigates with updated state  1943ms
   ✓ pages/LocationEdit > client-side validation: trimmed empty name shows field error and a11y attributes  588ms
   ✓ pages/LocationEdit > client-side validation: empty name (falsy OR branch) shows field error without typing  403ms
   ✓ pages/LocationEdit > maps 409/400 update error to name field error; other errors go to general error  963ms
   ✓ pages/LocationEdit > outer catch path: unexpected error after successful update sets general error (e.g., navigate throws)  574ms
   ✓ pages/LocationEdit > renders under dark theme and applies dark border color  471ms
   ✓ pages/LocationEdit > uses loc.name when originalName is empty (OR-branch) and calls update with newName  684ms
   ✓ pages/LocationEdit > 400 with detail maps to field error and clears on change (fieldErrors clear branch)  1424ms
   ✓ pages/LocationEdit > load success with found record missing name sets originalName to empty (OR-branch in setOriginalName)  1023ms
   ✓ pages/LocationEdit > update error without detail/message shows generic "Failed to save" (fallback branch)  836ms
   ✓ pages/LocationEdit > outer catch fallback message when thrown error has no message  816ms
 ✓ tests/unit/pages/BulkWatering.test.jsx (8 tests) 8103ms
   ✓ pages/BulkWatering > handles non-array plants response gracefully and shows empty state  652ms
   ✓ pages/BulkWatering > initially shows only plants that needed watering; toggle shows all and deemphasizes above-threshold  1277ms
   ✓ pages/BulkWatering > committing watering creates measurement then updates on second commit; invalid input marks error  1746ms
   ✓ pages/BulkWatering > clicking plant name navigates to plant details using handleView  441ms
   ✓ pages/BulkWatering > handles wrapped API response {status, data} and logs on error in update path  1289ms
   ✓ pages/BulkWatering > falls back to now when API omits measured_at/latest_at (OR-chain branch)  1378ms
   ✓ pages/BulkWatering > update response missing metrics keeps previous values (nullish coalescing branches)  1144ms
 ✓ tests/unit/pages/DailyCare.test.jsx (11 tests) 5934ms
   ✓ shows tasks table with measure/water indicators  1672ms
   ✓ renders empty state when no tasks are due  375ms
   ✓ header actions: refresh reloads data; buttons navigate and show counts  1016ms
   ✓ invalid timestamps produce no measurement needed while water threshold still triggers water task  368ms
   ✓ missing latest_at results in no measurement needed  367ms
   ✓ fallback rendering: no watering needed label and name/notes/location fallbacks  810ms
   ✓ clicking back button triggers navigate to dashboard (covers onBack inline)  506ms
 ✓ tests/unit/pages/MeasurementCreate.test.jsx (11 tests) 10705ms
   ✓ pages/MeasurementCreate > create flow: preselects plant from query and submits successfully  1325ms
   ✓ pages/MeasurementCreate > edit flow loads existing by id and updates via PUT  4792ms
   ✓ pages/MeasurementCreate > edit flow: loadExisting failure is ignored (catch path executed)  714ms
   ✓ pages/MeasurementCreate > edit flow with missing fields uses fallbacks in form values  640ms
   ✓ pages/MeasurementCreate > save error without message shows generic fallback  693ms
   ✓ pages/MeasurementCreate > shows error when plants API fails to load  514ms
   ✓ pages/MeasurementCreate > save error renders message  732ms
   ✓ pages/MeasurementCreate > dark theme styling applied and cancel navigates to /plants  571ms
 ✓ tests/unit/pages/LocationCreate.test.jsx (8 tests) 8673ms
   ✓ pages/LocationCreate > client-side validation: empty name shows error and a11y wiring; clears on change  1965ms
   ✓ pages/LocationCreate > successful save posts to API and navigates back to /locations  1296ms
   ✓ pages/LocationCreate > server error maps to name field error  879ms
   ✓ pages/LocationCreate > server error without message shows generic fallback  952ms
   ✓ pages/LocationCreate > sends trimmed non-null description when provided  1749ms
   ✓ pages/LocationCreate > cancel button navigates back to /locations without saving  629ms
   ✓ pages/LocationCreate > renders under dark theme (style branches executed)  1072ms
 ✓ tests/unit/pages/BulkWeightMeasurement.test.jsx (6 tests) 7409ms
   ✓ pages/BulkWeightMeasurement > default shows all plants; toggling off shows only needs-water snapshot  2302ms
   ✓ pages/BulkWeightMeasurement > committing weight creates then updates measurement; invalid negative marks error  2661ms
   ✓ pages/BulkWeightMeasurement > clicking plant name navigates using handleView  469ms
   ✓ pages/BulkWeightMeasurement > back button navigates to /daily (covers inline onBack callback)  505ms
   ✓ pages/BulkWeightMeasurement > handles wrapped {status,data} response and logs error on update failure  1250ms
 ✓ tests/unit/pages/RepottingCreate.test.jsx (16 tests) 11608ms
   ✓ pages/RepottingCreate > create flow: preselects plant from query, submits and navigates to plant page  1920ms
   ✓ pages/RepottingCreate > edit flow: loads existing by id, updates via PUT and navigates  1168ms
   ✓ pages/RepottingCreate > edit flow: allows blank numeric fields mapping to nulls in payload  502ms
   ✓ pages/RepottingCreate > edit flow: request resolves after unmount -> cancelled branch is taken  315ms
   ✓ pages/RepottingCreate > edit flow: save error shows server message (update branch)  980ms
   ✓ pages/RepottingCreate > edit flow: update error without message falls back to generic  647ms
   ✓ pages/RepottingCreate > save error shows generic message  1366ms
   ✓ pages/RepottingCreate > cancel navigates back to /plants and button disabled when form incomplete  608ms
   ✓ pages/RepottingCreate > create flow: allows blank numeric fields and posts nulls in payload (branch for ternaries)  1011ms
   ✓ pages/RepottingCreate > create flow: error without message falls back to generic message (catch branch)  777ms
   ✓ pages/RepottingCreate > dark theme branch and measured_at onChange handler are covered  966ms
   ✓ pages/RepottingCreate > light theme branch renders (isDark=false)  305ms
 ✓ tests/unit/pages/WateringCreate.test.jsx (12 tests) 7733ms
   ✓ pages/WateringCreate > create flow: preselects plant, posts payload and navigates to plant details  2654ms
   ✓ pages/WateringCreate > edit flow: loads existing by id and updates via PUT  1205ms
   ✓ pages/WateringCreate > edit flow: gracefully ignores loadExisting failure (catch path)  520ms
   ✓ pages/WateringCreate > shows error on plants load failure and on save failure  996ms
   ✓ pages/WateringCreate > dark theme renders and cancel navigates using document.referrer  399ms
   ✓ pages/WateringCreate > edit flow: unmount before loadExisting resolves triggers cancelled branch (no state update)  308ms
   ✓ pages/WateringCreate > edit flow: falls back to existing plant_id when response has none  309ms
   ✓ pages/WateringCreate > edit flow: measured_at maps via toLocalISOMinutes (truthy branch of OR)  366ms
stderr | tests/unit/pages/PlantDetails.test.jsx > pages/PlantDetails > plant load error named AbortError is ignored (no error shown)
Warning: An update to PlantDetails inside a test was not wrapped in act(...).
When testing, code that causes React state updates should be wrapped into act(...):
act(() => {
  /* fire events that update state */
});
/* assert on the output */
This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PlantDetails (/app/frontend/src/pages/PlantDetails.jsx:17:57)
    at RenderedRoute (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1101:7)
    at ThemeProvider (/app/frontend/src/ThemeContext.jsx:15:26)
stderr | tests/unit/pages/PlantDetails.test.jsx > pages/PlantDetails > plant load error named AbortError is ignored (no error shown)
Warning: An update to PlantDetails inside a test was not wrapped in act(...).
When testing, code that causes React state updates should be wrapped into act(...):
act(() => {
  /* fire events that update state */
});
/* assert on the output */
This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PlantDetails (/app/frontend/src/pages/PlantDetails.jsx:17:57)
    at RenderedRoute (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1101:7)
    at ThemeProvider (/app/frontend/src/ThemeContext.jsx:15:26)
Warning: An update to PlantDetails inside a test was not wrapped in act(...).
When testing, code that causes React state updates should be wrapped into act(...):
act(() => {
  /* fire events that update state */
});
/* assert on the output */
This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at PlantDetails (/app/frontend/src/pages/PlantDetails.jsx:17:57)
    at RenderedRoute (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/app/frontend/node_modules/react-router/dist/umd/react-router.development.js:1101:7)
    at ThemeProvider (/app/frontend/src/ThemeContext.jsx:15:26)
 ✓ tests/unit/pages/PlantEdit.test.jsx (31 tests) 15435ms
   ✓ pages/PlantEdit > prefills from router state, trims name on save, PUTs and navigates  1868ms
   ✓ pages/PlantEdit > trim fallback keeps original when trimmed is empty  747ms
   ✓ pages/PlantEdit > load error where thrown error is null still shows generic error  914ms
   ✓ pages/PlantEdit > advanced shows ID and Created when provided  631ms
   ✓ pages/PlantEdit > normalize maps species -> species_name when species_name missing  750ms
   ✓ pages/PlantEdit > advanced fertilizer EC input uses empty string when value is undefined (nullish coalesce)  524ms
   ✓ pages/PlantEdit > advanced fertilizer EC renders 0 without falling back to empty  1221ms
   ✓ pages/PlantEdit > advanced fertilizer EC input is empty when value is null  721ms
   ✓ pages/PlantEdit > plant load Error with empty message shows generic error (covers msg falsy path)  466ms
   ✓ pages/PlantEdit > plant load throws undefined error object and shows generic error  1006ms
   ✓ pages/PlantEdit > missing uuid on save alerts error  548ms
   ✓ pages/PlantEdit > dark theme styles and tabs switch  1319ms
   ✓ pages/PlantEdit > light theme advanced divider is rendered  642ms
   ✓ pages/PlantEdit > advanced EC input shows empty when initial value is empty string  578ms
   ✓ pages/PlantEdit > fertilizer_ec_ms empty string is sent as null  343ms
   ✓ pages/PlantEdit > fertilizer_ec_ms numeric string is converted to number and rendered  620ms
 ✓ tests/unit/pages/LocationsList.test.jsx (20 tests) 12082ms
   ✓ pages/LocationsList > renders locations after loading  1012ms
   ✓ pages/LocationsList > applies updatedLocation from router state and clears history state; header buttons navigate  987ms
   ✓ pages/LocationsList > drag-and-drop reorders and persists order; server error shows saveError  1263ms
   ✓ pages/LocationsList > delete flow: missing uuid shows saveError; API error keeps row; success removes row  3549ms
   ✓ pages/LocationsList > view shows alert with location details  413ms
   ✓ pages/LocationsList > edit button navigates to location edit with state  655ms
   ✓ pages/LocationsList > drag handlers early returns and abort error path produce no changes/errors  449ms
   ✓ pages/LocationsList > persistOrder early-return when some locations have no uuid (no API call)  422ms
   ✓ pages/LocationsList > persistOrder catch fallback: API rejects without message shows generic save error  470ms
   ✓ pages/LocationsList > view with missing description uses em dash in alert  377ms
   ✓ pages/LocationsList > delete API error without message shows generic fallback and does not remove row  573ms
   ✓ pages/LocationsList > delete API error with message surfaces that message (catch truthy branch)  587ms
 ✓ tests/unit/pages/PlantDetails.test.jsx (15 tests) 11019ms
   ✓ pages/PlantDetails > loads from router state and shows actions (Edit and QuickCreate)  1993ms
   ✓ pages/PlantDetails > loads plant by uuid via API when no state and handles error  933ms
   ✓ pages/PlantDetails > loads measurements, handles error with retry, and supports edit/delete actions  2383ms
   ✓ pages/PlantDetails > measurements error shows ErrorNotice and retry reloads  594ms
   ✓ pages/PlantDetails > delete confirmation without id closes dialog without calling API  1109ms
   ✓ pages/PlantDetails > plant load error with message containing "abort" is ignored (no error shown)  1099ms
   ✓ pages/PlantDetails > delete API error is ignored and list refetches; dialog closes  759ms
   ✓ pages/PlantDetails > details fields and percent formatting branches: weights show units; pct string uses raw; null day pct shows —  781ms
 ❯ tests/unit/pages/PlantCreate.test.jsx (18 tests | 3 failed) 27270ms
   × pages/PlantCreate > submits full payload with trimmed strings and number conversions across tabs 15116ms
     → Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × pages/PlantCreate > backend error with string detail clears field errors without general message; all tabs handlers exercised 2312ms
     → Unable to find an element with the text: /name is required/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="layout"
    >
      <aside
        class="sidebar"
      >
        <div
          class="sidebar-title"
        >
          Create New Plant
        </div>
        <nav>
          <a
            class="nav-link"
            href="/dashboard"
          >
            Overview
          </a>
          <a
            class="nav-link"
            href="/daily"
          >
            Daily Care
          </a>
          <a
            class="nav-link"
            href="/plants"
          >
            Plants
          </a>
          <a
            class="nav-link"
            href="/calibration"
          >
            Calibration
          </a>
          <a
            class="nav-link"
            href="/locations"
          >
            Locations
          </a>
          <a
            class="nav-link"
            href="/settings"
          >
            Settings
          </a>
        </nav>
        <div
          class="mt-4"
        >
          <a
            class="back-link"
            href="/"
          >
            ← Back to Home
          </a>
        </div>
      </aside>
      <main
        class="main"
      >
        <h1
          style="margin-top: 0px;"
        >
          Create New Plant
        </h1>
        <p>
          <a
            href="/plants"
          >
            ← Back to Plants
          </a>
        </p>
        <form
          style="padding: 20px; background-color: rgb(245, 245, 245); border-radius: 8px; border: 1px solid rgb(221, 221, 221);"
        >
          <div
            aria-label="Create plant tabs"
            role="tablist"
            style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;"
          >
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              General
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Service
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Care
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Advanced
            </button>
            <button
              aria-selected="true"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Health
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Calculated
            </button>
          </div>
          <div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="light_level_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Light Level ID
              </label>
              <input
                id="light_level_id"
                name="light_level_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="pest_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Pest Status ID
              </label>
              <input
                id="pest_status_id"
                name="pest_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value="  pest1  "
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="health_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Health Status ID
              </label>
              <input
                id="health_status_id"
                name="health_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
          </div>
          <div
            style="display: flex; gap: 10px;"
          >
            <button
              style="padding: 10px 20px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="submit"
            >
              Save
            </button>
            <button
              style="padding: 10px 20px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Cancel
            </button>
          </div>
        </form>
      </main>
    </div>
  </div>
</body>
Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="layout"
    >
      <aside
        class="sidebar"
      >
        <div
          class="sidebar-title"
        >
          Create New Plant
        </div>
        <nav>
          <a
            class="nav-link"
            href="/dashboard"
          >
            Overview
          </a>
          <a
            class="nav-link"
            href="/daily"
          >
            Daily Care
          </a>
          <a
            class="nav-link"
            href="/plants"
          >
            Plants
          </a>
          <a
            class="nav-link"
            href="/calibration"
          >
            Calibration
          </a>
          <a
            class="nav-link"
            href="/locations"
          >
            Locations
          </a>
          <a
            class="nav-link"
            href="/settings"
          >
            Settings
          </a>
        </nav>
        <div
          class="mt-4"
        >
          <a
            class="back-link"
            href="/"
          >
            ← Back to Home
          </a>
        </div>
      </aside>
      <main
        class="main"
      >
        <h1
          style="margin-top: 0px;"
        >
          Create New Plant
        </h1>
        <p>
          <a
            href="/plants"
          >
            ← Back to Plants
          </a>
        </p>
        <form
          style="padding: 20px; background-color: rgb(245, 245, 245); border-radius: 8px; border: 1px solid rgb(221, 221, 221);"
        >
          <div
            aria-label="Create plant tabs"
            role="tablist"
            style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;"
          >
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              General
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Service
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Care
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Advanced
            </button>
            <button
              aria-selected="true"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Health
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Calculated
            </button>
          </div>
          <div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="light_level_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Light Level ID
              </label>
              <input
                id="light_level_id"
                name="light_level_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="pest_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Pest Status ID
              </label>
              <input
                id="pest_status_id"
                name="pest_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value="  pest1  "
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="health_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Health Status ID
              </label>
              <input
                id="health_status_id"
                name="health_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
          </div>
          <div
            style="display: flex; gap: 10px;"
          >
            <button
              style="padding: 10px 20px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="submit"
            >
              Save
            </button>
            <button
              style="padding: 10px 20px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Cancel
            </button>
          </div>
        </form>
      </main>
    </div>
  </div>
</body>
   ✓ pages/PlantCreate > client-side validation: trimmed empty name shows error on General tab  746ms
   ✓ pages/PlantCreate > client-side validation: untouched empty name hits falsy branch of trim guard 242ms
   ✓ pages/PlantCreate > client-side validation: clicking Save with empty name after removing required attribute also triggers error (falsy branch)  455ms
   × pages/PlantCreate > successful save posts trimmed payload and navigates to /plants 1037ms
     → expected "spy" to be called with arguments: [ '/plants' ]
Number of calls: 0
   ✓ pages/PlantCreate > backend validation detail array maps to field error  600ms
   ✓ pages/PlantCreate > general error path shown when API fails without detail; locations load error rendered near select  676ms
   ✓ pages/PlantCreate > dark theme renders inputs with dark styles and tabs switch content  946ms
   ✓ pages/PlantCreate > save error with axios-like response but without detail shows generic message  687ms
   ✓ pages/PlantCreate > outer catch shows error message when navigate throws after successful save  498ms
   ✓ pages/PlantCreate > Cancel button navigates back to /plants without saving 281ms
   ✓ pages/PlantCreate > optional fields left empty map to null (numbers/strings) and checkboxes default to 0  760ms
   ✓ pages/PlantCreate > dark theme: visit all tabs to exercise isDark style branches across sections  1401ms
   ✓ pages/PlantCreate > locations load: non-array response maps to empty list without error 177ms
   ✓ pages/PlantCreate > backend validation: missing msg falls back to "Invalid value"  603ms
   ✓ pages/PlantCreate > outer catch fallback message when thrown error has no message  584ms
   ✓ pages/PlantCreate > locations load effect: cleanup prevents setState after unmount (cancelled branch) 122ms
 ✓ tests/unit/pages/PlantsList.test.jsx (28 tests) 32240ms
   ✓ renders plants after loading  1229ms
   ✓ renders empty state when no plants  354ms
   ✓ EmptyState New plant button is clickable (invokes navigate handler)  412ms
   ✓ Frequency column shows "—" when frequency_days is not finite, otherwise "Nd"  738ms
   ✓ numeric search filters by threshold (<= query)  1158ms
   ✓ applies updatedPlant from router state without crashing (effect path exercised)  477ms
   ✓ drag-and-drop reorders rows and persists order; server error shows saveError  1649ms
   ✓ moveUp/moveDown buttons reorder and persist; disabled at edges  2060ms
   ✓ delete flow: missing uuid shows saveError; API error shows error; success removes row  4956ms
   ✓ limits list to PAGE_LIMIT and shows meta count  9646ms
   ✓ row branches: link vs plain text, needsWater badge, and view/edit guards without uuid  1864ms
   ✓ moveDown button moves item down and persists order  851ms
   ✓ text search filters by name/notes/location and disables drag & move buttons  835ms
   ✓ delete failure with null/empty error shows generic message branch  613ms
   ✓ filter handles non-numeric thresholds and persistOrder early-return when missing uuid  917ms
   ✓ onDragOver early-return branches and onDragEnd with null dragIndex do not persist or reorder  610ms
   ✓ name cell applies background gradient style based on water_retained_pct and search matches identify_hint  660ms
   ✓ falls back to empty style object when getWaterRetainCellStyle returns falsy (OR branch)  302ms
   ✓ Cancel in delete dialog triggers closeDialog without deleting  606ms
   ✓ persistOrder generic error branch when reorder rejects with empty error object  568ms
   ✓ PageHeader back and create actions are clickable (invoke inline handlers)  846ms
stderr | tests/unit/components/BulkMeasurementTable.test.jsx > BulkMeasurementTable > does not render badge when retained > threshold; renders plain text when no uuid
Warning: Each child in a list should have a unique "key" prop.
Check the render method of `BulkMeasurementTable`. See https://reactjs.org/link/warning-keys for more information.
    at tr
    at BulkMeasurementTable (/app/frontend/src/components/BulkMeasurementTable.jsx:7:33)
 ✓ tests/unit/components/BulkMeasurementTable.test.jsx (15 tests) 2741ms
   ✓ BulkMeasurementTable > renders rows and needs-water badge when retained ≤ threshold; link click calls onViewPlant  794ms
   ✓ BulkMeasurementTable > first column tooltip and label render, and cell titles depend on uuid  328ms
stderr | tests/unit/pages/Settings.test.jsx > pages/Settings > clears success message after 1.5s via timeout callback
Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.
 ✓ tests/unit/pages/Settings.test.jsx (5 tests) 2715ms
   ✓ pages/Settings > uses defaults when localStorage is empty  480ms
   ✓ pages/Settings > initializes fields from localStorage and saves updates with success message  1205ms
   ✓ pages/Settings > changing theme select persists theme via ThemeProvider  389ms
   ✓ pages/Settings > vacation mode selection is applied and persisted on save  391ms
 ✓ tests/unit/components/form/fields/TextInput.test.jsx (3 tests) 1558ms
   ✓ TextInput field > renders label, placeholder, supports typing and required/disabled props  973ms
   ✓ TextInput field > shows validation error on blur and wires aria attributes  352ms
 ✓ tests/unit/main.test.jsx (1 test) 1382ms
   ✓ src/main.jsx bootstrap > mounts React app into #root and renders strict tree with router and routes  1349ms
 ✓ tests/unit/components/QuickCreateButtons.test.jsx (2 tests) 1726ms
   ✓ QuickCreateButtons > renders three action buttons and navigates with plant uuid and preserves from state  1236ms
   ✓ QuickCreateButtons > omits plant query when plantUuid is not provided; uses fallback labels and compact gap  463ms
 ✓ tests/unit/components/form/fields/DateTimeLocal.test.jsx (3 tests) 1792ms
   ✓ DateTimeLocal field > renders label, allows typing datetime string, respects required/disabled  1073ms
   ✓ DateTimeLocal field > shows validation error on blur and wires aria attributes  518ms
 ✓ tests/unit/components/form/fields/Select.test.jsx (3 tests) 1357ms
   ✓ Select field > renders label, options, allows selection; respects disabled/required  888ms
 ✓ tests/unit/components/IconButton.test.jsx (5 tests) 1099ms
   ✓ IconButton > renders requested icon, sets a11y labels, calls onClick when enabled  700ms
 ✓ tests/unit/components/form/fields/Checkbox.test.jsx (2 tests) 1255ms
   ✓ Checkbox field > renders label, toggles value, and respects disabled/required props  934ms
 ✓ tests/unit/pages/BulkWatering.branches.test.jsx (3 tests) 1171ms
   ✓ pages/BulkWatering (branches) > handleView returns early when plant has no uuid (no navigation)  591ms
   ✓ pages/BulkWatering (branches) > back button navigates to /daily (covers inline onBack callback)  461ms
 ✓ tests/unit/components/StatusIcon.test.jsx (4 tests) 1136ms
   ✓ StatusIcon > computes title/aria-label based on type and active; defaults when no label provided  701ms
 ✓ tests/unit/components/SearchField.test.jsx (3 tests) 1125ms
   ✓ SearchField > renders with defaults and associates a11y attributes  677ms
 ✓ tests/unit/components/form/fields/NumberInput.test.jsx (3 tests) 1561ms
   ✓ NumberInput field > renders label, placeholder, numeric typing and respects min/max/step and required/disabled  710ms
   ✓ NumberInput field > validators: required, then min and max errors with aria wiring  687ms
 ✓ tests/unit/components/DashboardLayout.test.jsx (4 tests) 645ms
   ✓ DashboardLayout > highlights only the active nav link for current route (covers both branches)  349ms
 ✓ tests/unit/pages/Dashboard.test.jsx (1 test) 748ms
   ✓ pages/Dashboard > renders dashboard layout and welcome text  731ms
 ✓ tests/unit/hooks/useDocumentTitle.test.jsx (5 tests) 609ms
   ✓ hooks/useDocumentTitle > re-applies same title on route change to counter late writers; reacts to location key changes  444ms
 ✓ tests/unit/components/Sparkline.test.jsx (52 tests) 1819ms
 ✓ tests/unit/App.test.jsx (2 tests) 721ms
   ✓ App.jsx > shows loading, then renders backend message on success  631ms
 ✓ tests/unit/components/Badge.test.jsx (5 tests) 720ms
   ✓ Badge.jsx > renders children, role, and aria-live with default (neutral) tone  441ms
 ✓ tests/unit/components/feedback/ErrorNotice.test.jsx (3 tests) 705ms
   ✓ components/feedback/ErrorNotice > renders alert with message and optional retry button triggers handler  571ms
 ✓ tests/unit/components/feedback/Loader.test.jsx (2 tests) 604ms
   ✓ components/feedback/Loader > renders with default accessible semantics and label  487ms
 ✓ tests/unit/ThemeContext.test.jsx (8 tests) 602ms
 ✓ tests/unit/api/client.test.ts (24 tests) 137ms
 ✓ tests/unit/api/plants.test.ts (9 tests) 84ms
 ✓ tests/unit/components/feedback/EmptyState.test.jsx (3 tests) 683ms
   ✓ components/feedback/EmptyState > renders with title only and role note  334ms
 ✓ tests/unit/api/measurements.test.ts (11 tests) 89ms
 ✓ tests/unit/components/form/useForm.test.js (14 tests) 305ms
 ✓ tests/unit/components/DateTimeText.test.jsx (9 tests) 451ms
 ✓ tests/unit/api/calibration.test.ts (3 tests) 47ms
 ✓ tests/unit/utils/datetime.test.js (12 tests) 79ms
 ✓ tests/unit/api/locations.test.ts (7 tests) 38ms
 ✓ tests/unit/setupTests.spec.ts (4 tests) 42ms
 ✓ tests/unit/api/daily.test.ts (1 test) 30ms
 ✓ tests/unit/utils/waterLoss.test.js (1 test) 22ms
 ✓ tests/unit/utils/water_retained_colors.test.js (3 tests) 36ms
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
 FAIL  tests/unit/pages/PlantCreate.test.jsx > pages/PlantCreate > submits full payload with trimmed strings and number conversions across tabs
Error: Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ tests/unit/pages/PlantCreate.test.jsx:44:3
     42|   })
     43|
     44|   test('submits full payload with trimmed strings and number conversions across tabs', async () => {
       |   ^
     45|     const user = userEvent.setup()
     46|     // Intercept POST and capture payload for assertions after navigation
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯
 FAIL  tests/unit/pages/PlantCreate.test.jsx > pages/PlantCreate > backend error with string detail clears field errors without general message; all tabs handlers exercised
TestingLibraryElementError: Unable to find an element with the text: /name is required/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="layout"
    >
      <aside
        class="sidebar"
      >
        <div
          class="sidebar-title"
        >
          Create New Plant
        </div>
        <nav>
          <a
            class="nav-link"
            href="/dashboard"
          >
            Overview
          </a>
          <a
            class="nav-link"
            href="/daily"
          >
            Daily Care
          </a>
          <a
            class="nav-link"
            href="/plants"
          >
            Plants
          </a>
          <a
            class="nav-link"
            href="/calibration"
          >
            Calibration
          </a>
          <a
            class="nav-link"
            href="/locations"
          >
            Locations
          </a>
          <a
            class="nav-link"
            href="/settings"
          >
            Settings
          </a>
        </nav>
        <div
          class="mt-4"
        >
          <a
            class="back-link"
            href="/"
          >
            ← Back to Home
          </a>
        </div>
      </aside>
      <main
        class="main"
      >
        <h1
          style="margin-top: 0px;"
        >
          Create New Plant
        </h1>
        <p>
          <a
            href="/plants"
          >
            ← Back to Plants
          </a>
        </p>
        <form
          style="padding: 20px; background-color: rgb(245, 245, 245); border-radius: 8px; border: 1px solid rgb(221, 221, 221);"
        >
          <div
            aria-label="Create plant tabs"
            role="tablist"
            style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;"
          >
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              General
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Service
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Care
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Advanced
            </button>
            <button
              aria-selected="true"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Health
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Calculated
            </button>
          </div>
          <div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="light_level_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Light Level ID
              </label>
              <input
                id="light_level_id"
                name="light_level_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="pest_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Pest Status ID
              </label>
              <input
                id="pest_status_id"
                name="pest_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value="  pest1  "
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="health_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Health Status ID
              </label>
              <input
                id="health_status_id"
                name="health_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
          </div>
          <div
            style="display: flex; gap: 10px;"
          >
            <button
              style="padding: 10px 20px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="submit"
            >
              Save
            </button>
            <button
              style="padding: 10px 20px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Cancel
            </button>
          </div>
        </form>
      </main>
    </div>
  </div>
</body>
Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="layout"
    >
      <aside
        class="sidebar"
      >
        <div
          class="sidebar-title"
        >
          Create New Plant
        </div>
        <nav>
          <a
            class="nav-link"
            href="/dashboard"
          >
            Overview
          </a>
          <a
            class="nav-link"
            href="/daily"
          >
            Daily Care
          </a>
          <a
            class="nav-link"
            href="/plants"
          >
            Plants
          </a>
          <a
            class="nav-link"
            href="/calibration"
          >
            Calibration
          </a>
          <a
            class="nav-link"
            href="/locations"
          >
            Locations
          </a>
          <a
            class="nav-link"
            href="/settings"
          >
            Settings
          </a>
        </nav>
        <div
          class="mt-4"
        >
          <a
            class="back-link"
            href="/"
          >
            ← Back to Home
          </a>
        </div>
      </aside>
      <main
        class="main"
      >
        <h1
          style="margin-top: 0px;"
        >
          Create New Plant
        </h1>
        <p>
          <a
            href="/plants"
          >
            ← Back to Plants
          </a>
        </p>
        <form
          style="padding: 20px; background-color: rgb(245, 245, 245); border-radius: 8px; border: 1px solid rgb(221, 221, 221);"
        >
          <div
            aria-label="Create plant tabs"
            role="tablist"
            style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;"
          >
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              General
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Service
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Care
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Advanced
            </button>
            <button
              aria-selected="true"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Health
            </button>
            <button
              aria-selected="false"
              role="tab"
              style="padding: 10px 15px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Calculated
            </button>
          </div>
          <div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="light_level_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Light Level ID
              </label>
              <input
                id="light_level_id"
                name="light_level_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="pest_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Pest Status ID
              </label>
              <input
                id="pest_status_id"
                name="pest_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value="  pest1  "
              />
            </div>
            <div
              style="margin-bottom: 15px;"
            >
              <label
                for="health_status_id"
                style="display: block; margin-bottom: 5px; font-weight: bold; color: rgb(0, 0, 0);"
              >
                Health Status ID
              </label>
              <input
                id="health_status_id"
                name="health_status_id"
                placeholder="ULID or free text for now"
                style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
                value=""
              />
            </div>
          </div>
          <div
            style="display: flex; gap: 10px;"
          >
            <button
              style="padding: 10px 20px; background-color: rgb(221, 221, 221); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="submit"
            >
              Save
            </button>
            <button
              style="padding: 10px 20px; background-color: rgb(238, 238, 238); border: 1px solid rgb(204, 204, 204); border-radius: 4px; cursor: pointer; color: rgb(0, 0, 0);"
              type="button"
            >
              Cancel
            </button>
          </div>
        </form>
      </main>
    </div>
  </div>
</body>
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ findByText node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ tests/unit/pages/PlantCreate.test.jsx:165:25
    163|     await user.type(nameInput, '   ')
    164|     await user.click(screen.getByRole('button', { name: /save/i }))
    165|     expect(await screen.findByText(/name is required/i)).toBeInTheDocument()
       |                         ^
    166|
    167|     // Now provide a valid name and trigger backend error with string detail
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯
 FAIL  tests/unit/pages/PlantCreate.test.jsx > pages/PlantCreate > successful save posts trimmed payload and navigates to /plants
AssertionError: expected "spy" to be called with arguments: [ '/plants' ]
Number of calls: 0
 ❯ tests/unit/pages/PlantCreate.test.jsx:234:26
    232|     await user.selectOptions(screen.getByLabelText(/location/i), 'l1')
    233|     await user.click(screen.getByRole('button', { name: /^save$/i }))
    234|     expect(mockNavigate).toHaveBeenCalledWith('/plants')
       |                          ^
    235|   })
    236|
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯
 Test Files  1 failed | 49 passed (50)
      Tests  3 failed | 449 passed (452)
   Start at  14:02:14
   Duration  142.57s (transform 6.18s, setup 198.04s, collect 172.67s, tests 205.05s, environment 1095.88s, prepare 146.85s)
